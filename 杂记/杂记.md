QPS：Query Per Second 每秒钟的查询数量，大致等同于每秒访问量，压测工具。

TPS：每秒的事务量，一般用于数据库层面，就是数据库每秒的事务量。

Compaction：压缩。

Trace：追踪。

# Lombok 注解



## @Accessors

> ```java
> # 例子
> @Data
> @Accessors(fluent = true)
> @Accessors(chain = true)
> @Accessors(prefix = "p")
> public class Object {
> 	private Long pId;
>     
>     // fluent：流畅
>     public Object pId(Long id) {
>     	this.id = id;
>     }
>     public Long pId() {
>     }
>     
>     // chain：链式，set方法的返回值是该类的对象，可以使用链式调用set值
>     public Object setId(Long id) {
>     	this.id = id;
>     }
>     
>     // prefix：前缀，忽略属性的前缀
>     public void setId(Long id) {
>     	this.id = id;
>     }
>     public Long pId() {
>     }
> }
> ```

## @EqualsAndHashCode

> 1. 此注解会生成`equals(Object other)` 和 `hashCode()`方法
> 2. 它默认使用非静态，非瞬态的属性
> 3. 可通过参数`exclude`排除一些属性
> 4. 可通过参数`of`指定仅使用哪些属性
> 5. 它默认仅使用该类中定义的属性且不调用父类的方法
> 6. 可通过`callSuper=true`解决上一点问题。让其生成的方法中调用父类的方法
>
> ```java
> // @Data == @Getter + @Setter + @RequiredArgsConstructor + @ToString + @EqualsAndHashCode
> @Data
> public class TV {
>     private Long id;
>     private String name;
> }
> 
> // @EqualsAndHashCode 编译时会有 equals(XiaomiTV xiaomiTV)、hashCode()
> // callSuper = false 时，对象在做 equals 比较时，不会包含父类的字段，反之，则包含。
> // exclude 字段（可多个）equals时，不比较。
> // 
> @EqualsAndHashCode(exclude = {"color"},callSuper = false)
> public class XiaomiTV extend TV {
>     private Long price;
>     private String color;
> }
> 
> public class EqualsAndHashCodeTest {
>     public static void main(String[] args) {
>         XiaoMiTV tv1 = new XiaoMiTV(1, "米1", 1L, "白");
>         XiaoMiTV tv2 = new XiaoMiTV(2, "米2", 1L, "黑");
>         System.out.println(tv1.equals(tv2));	
>         // callSuper = false, 打印 true
>         // callSuper = true, 打印 false
>     }
> }
> ```
>
> 

# 配置 API GateWay 

## 添加 API GateWay（API网关）

![image-20210428155554936](https://i.loli.net/2021/04/29/HFCU3jafDJIk4Ge.png)

### 一、填写接口基本信息

![image-20210428143437779](https://i.loli.net/2021/04/29/FawHoUnCGhi2OdW.png)

### 二、定义API请求

![image-20210428143420338](https://i.loli.net/2021/04/29/n8iBLw3TtuI6QNJ.png)

### 三、定义API后端服务信息(此处可以定义Mock：模拟接口)

![image-20210428143353090](https://i.loli.net/2021/04/29/KUTPWyaOwADIGNM.png)

### 四、定义返回结束

![image-20210428143456447](https://i.loli.net/2021/04/29/sp3MlnxkbXVwqmE.png)

### 五、添加授权(有鉴权的接口需要配置)

![image-20210428155350501](https://i.loli.net/2021/04/29/vioKTObnfxukG4F.png)

# 时间间隔计算

```java
/**
  * 检查时间间隔是否满足
  *
  * @param lastUpdateTime 上次修改地区时间
  * @param modifyIntervalDay 时间间隔配置
  * @return
  */
private Boolean checkInterval(Date lastUpdateTime, int modifyIntervalDay) {
    LocalDate localDate = LocalDate.now();
    System.out.println(localDate);
    LocalDate localDate3 = LocalDate.parse(
        new SimpleDateFormat("yyyy-MM-dd").format(lastUpdateTime), 
        DateTimeFormatter.ofPattern("yyyy-MM-dd")
    );
    System.out.println(localDate3);
    Period next = Period.between(localDate, localDate3);
    if (next.getDays() < modifyIntervalDay) {
        return Boolean.FALSE;
    }
    return Boolean.TRUE;
}
```

1