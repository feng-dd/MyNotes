## 乐观锁

> 乐观的认为并发竞争不会发生。

### 实现 -> `CAS机制`

> Compare And Set，先比较再设置。
>
> 预期值A，内存值B，修改值V，当A和B相等时，认为没有线程修改过该值，将B替换为V。

### 应用

Atomic 原子类。

### `ABA问题`

通过版本号解决。

### 缺点

不适合并发竞争高的场景，会造成大量线程空循环，性能和效率都不高。

### Java8优化

分段 CAS 机制，LongAdder 底层实现：Cell 数组，线程对某个 Cell 元素的 Value 进行 CAS 累加操作，CAS 失败，自动找到下个 Cell 元素进行累加，避免空自旋出现无限循环的情况，分段也分摊了线程对数据累加的压力。



