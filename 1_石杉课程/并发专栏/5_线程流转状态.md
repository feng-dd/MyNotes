# 线程流转状态

## Java线程的状态

> Thread 类中定义了 State 枚举类，包含`六`个状态：
>
> - NEW：新建状态。
> - RUNNABLE：可运行(就绪)/运行状态。
> - BLOCKED：阻塞状态。
> - WAITING：无限期等待状态。
> - TIMED_WAITING：限期等待状态。
> - TERMINATED：终止状态。

## 状态流转

![image-20210608164817924](https://i.loli.net/2021/06/08/eunrD3EUJ6p7P2X.png)

### 线程状态详解

#### 一、NEW（新建状态）

> 实现Runnable接口`和`继承Thread类`可以得到一个线程类，new一个实例出来，线程对象就进入了初始化状态。

#### 二、RUNNABLE（就绪状态）

> 等待CPU时间片的状态；
>
> 进入就绪状态的场景：
>
> 1. 线程对象调用 `start()`；
> 2. 线程`sleep()`结束；
> 3. 其他线程调用`join()`结束------------------------待确认
> 4. 当前线程`等待用户输入`；
> 5. 线程获取到对象锁；
> 6. `锁池`中的线程`获取到对象锁`；
> 7. 线程`时间片用完`；
> 8. 当前线程调用`yield()`。

#### 三、RUNNING（运行状态）

> 就绪状态的线程`获取到CPU时间片`，线程被系统调度进入到运行状态；`只能从就绪状态转换此状态`。

#### 四、BLOCKED（阻塞状态）

> 线程`未获得锁`而阻塞在同步方法或同步代码块之前的状态；

#### 五、WAITING（无限期等待状态）

> 1. 线程调用`sleep()`;
> 2. 对象调用`wait()`;
>
> 等待唤醒的状态。

#### 六、TIMED_WAITING（限期等待状态）

> 和WAITING状态类似，只是方法配置了超时时间；
>
> 等待唤醒或超时自动唤醒。

#### 七、TERMINATED（终止状态）

> 1. run() 执行完毕；
> 2. run() 异常；
> 3. interrupt 中断。
>
> 在一个终止的线程上调用start()方法，会抛出java.lang.IllegalThreadStateException异常。